---
import Layout from "../layouts/Layout.astro";
const pageTitle = "Collections — Itrora";

// Liens Stripe connus
const STRIPE = {
  "coco-des-iles": "https://buy.stripe.com/9B64gz7gN7YydEI6HgbQY01",
  "dragon-rose":   "https://buy.stripe.com/eVqeVd58F7Yy9os3v4bQY02",
  "musc-fruite":   "https://buy.stripe.com/3cIbJ1gRna6GeIMc1AbQY03",
};
---

<Layout title={pageTitle} description="Toutes nos fragrances Itrora Parfums.">

  <!-- ===== HERO (image full-bleed + nav 'chips' scrollable) ===== -->
  <section class="hero">
    <img class="hero__bg" src="/entete-collections.png" alt="Gamme Itrora Parfums" loading="eager" fetchpriority="high" />
    <div class="hero__shade" aria-hidden="true"></div>

    <div class="hero__inner">
      <nav class="chips" aria-label="Navigation secondaire">
        <a href="/">Accueil</a>
        <a href="/collections" aria-current="page">Collections</a>
        <a href="/a-propos">À propos</a>
        <a href="/contact">Contact</a>
        <a href="/foireauxquestions">FAQ</a>
      </nav>
      <h1 class="hero__title">Les Parfums</h1>
    </div>
  </section>

  <!-- ===== BOUTIQUE ===== -->
  <section class="shop">
    <div class="shop__wrap">

      <!-- Barre outils -->
      <div class="shop__toolbar">
        <div class="results-count" id="resultsCount">AFFICHAGE DE 1–3 SUR 3 RÉSULTATS</div>

        <label class="sort" aria-label="Trier les produits">
          <select id="sortSelect">
            <option value="default" selected>Tri par défaut</option>
            <option value="pop">Tri par popularité</option>
            <option value="rating">Tri par notes moyennes</option>
            <option value="date">Tri du plus récent au plus ancien</option>
            <option value="price-asc">Tri par tarif croissant</option>
            <option value="price-desc">Tri par tarif décroissant</option>
          </select>
        </label>
      </div>

      <!-- Grille produits -->
      <div class="grid" id="productGrid">

        <!-- Coco des îles -->
        <article
          class="p-card"
          data-index="1"
          data-price="40.00"
          data-rating="4.6"
          data-popularity="128"
          data-date="2025-01-15"
        >
          <a class="p-media" href="/produits/coco-des-iles" aria-label="Voir Coco des îles">
            <img src="/coco-des-iles1.png" alt="Coco des îles — Extrait de parfum" loading="lazy" />
          </a>
          <div class="p-body">
            <p class="p-eyebrow">VANILLÉE</p>
            <h3 class="p-title"><a href="/produits/coco-des-iles">Coco des îles</a></h3>
            <div class="p-price">40,00&nbsp;€</div>
            <a
              href={STRIPE["coco-des-iles"]}
              class="p-btn btn-buy"
              target="_blank"
              rel="noopener noreferrer"
            >JE VEUX ACHETER</a>
          </div>
        </article>

        <!-- Dragon Rose (promo) -->
        <article
          class="p-card is-sale"
          data-index="2"
          data-price="35.00"
          data-rating="4.8"
          data-popularity="162"
          data-date="2025-02-06"
        >
          <a class="p-media" href="/produits/dragon-rose" aria-label="Voir Dragon Rose">
            <img src="/dragon-rose2.png" alt="Dragon Rose — Extrait de parfum" loading="lazy" />
            <span class="p-badge">PROMO</span>
          </a>
          <div class="p-body">
            <p class="p-eyebrow">FRUITÉE</p>
            <h3 class="p-title"><a href="/produits/dragon-rose">Dragon Rose</a></h3>
            <div class="p-price"><span class="old">40,00&nbsp;€</span><span class="new">35,00&nbsp;€</span></div>
            <a
              href={STRIPE["dragon-rose"]}
              class="p-btn btn-buy"
              target="_blank"
              rel="noopener noreferrer"
            >JE VEUX ACHETER</a>
          </div>
        </article>

        <!-- Musc fruité -->
        <article
          class="p-card"
          data-index="3"
          data-price="40.00"
          data-rating="4.4"
          data-popularity="97"
          data-date="2025-01-28"
        >
          <a class="p-media" href="/produits/musc-fruite" aria-label="Voir Musc fruité">
            <img src="/musc-fruite1.png" alt="Musc fruité — Extrait de parfum" loading="lazy" />
          </a>
          <div class="p-body">
            <p class="p-eyebrow">FRUITÉE</p>
            <h3 class="p-title"><a href="/produits/musc-fruite">Musc fruité</a></h3>
            <div class="p-price">40,00&nbsp;€</div>
            <a
              href={STRIPE["musc-fruite"]}
              class="p-btn btn-buy"
              target="_blank"
              rel="noopener noreferrer"
            >JE VEUX ACHETER</a>
          </div>
        </article>

      </div>
    </div>
  </section>
<title>Parfums Itrora – Collection 2025</title>
<meta name="description" content="Découvrez la collection Itrora : extraits de parfum longue tenue, ingrédients nobles, fabrication française.">
<link rel="canonical" href="https://itrora.com/collections">

  <!-- ===== CSS ===== -->
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@500;600;700;800;900&display=swap');

    :root{
      --ink:#243630;
      --muted:#6F6A65;
      --accent:#e8613c;
      --wrap: min(1200px, 92%);
    }

    /* Police page-scoped */
    .hero, .shop, .hero *, .shop *{
      font-family:"Montserrat", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif !important;
    }

    /* HERO */
    .hero{ position:relative; width:100vw; max-width:100vw; margin-left:calc(50% - 50vw); margin-right:calc(50% - 50vw); overflow:hidden; }
    .hero__bg{ display:block; width:100%; height:auto; }
    .hero__shade{ position:absolute; inset:0; background:radial-gradient(80% 60% at 50% 60%, rgba(0,0,0,.15), rgba(0,0,0,.35) 70%); mix-blend-mode:multiply; pointer-events:none; }
    .hero__inner{ position:absolute; inset:0; display:grid; place-items:center; gap:14px; padding: 12px 16px 24px; }

    .chips{
      display:flex; gap:10px; align-items:center; padding:8px 10px;
      border-radius:999px; background:rgba(255,255,255,.14); border:1px solid rgba(255,255,255,.28);
      color:#fff; backdrop-filter:blur(10px) saturate(120%); -webkit-backdrop-filter:blur(10px) saturate(120%);
      box-shadow:0 8px 30px rgba(0,0,0,.25);
      overflow-x:auto; -webkit-overflow-scrolling:touch; max-width:90vw;
    }
    .chips::-webkit-scrollbar{ display:none; }
    .chips a{ color:#fff; text-decoration:none; font-weight:700; font-size:14px; white-space:nowrap; padding:4px 8px; opacity:.95; }
    .chips a[aria-current="page"]{ text-decoration:underline; }

    .hero__title{ margin:0; color:#fff; font-weight:900; font-size:clamp(30px,7vw,60px); text-shadow:0 2px 16px rgba(0,0,0,.45); }

    /* BOUTIQUE */
    .shop{ padding: 22px 0 64px; color:var(--ink); }
    .shop__wrap{ width:var(--wrap); margin:0 auto; }

    .shop__toolbar{
      display:grid; grid-template-columns:1fr auto; gap:12px; align-items:end;
      margin:18px 0 22px;
    }
    .results-count{ text-transform:uppercase; letter-spacing:.18em; font-weight:800; color:var(--ink); opacity:.95; font-size:12px; }

    .sort{ position:relative; }
    .sort select{
      appearance:none; -webkit-appearance:none; -moz-appearance:none;
      border:0; outline:0; background:transparent; padding:8px 28px 8px 0;
      border-bottom:2px solid var(--accent); font-weight:700; color:var(--ink); cursor:pointer; font-size:14px;
    }
    .sort::after{
      content:""; position:absolute; right:2px; top:50%; margin-top:-3px;
      border-width:6px 6px 0 6px; border-style:solid; border-color:var(--ink) transparent transparent transparent;
      pointer-events:none;
    }

    .grid{ display:grid; grid-template-columns:1fr; gap:18px; }
    @media (min-width:640px){ .grid{ grid-template-columns:repeat(2, minmax(0,1fr)); gap:22px; } }
    @media (min-width:980px){ .grid{ grid-template-columns:repeat(3, minmax(0,1fr)); gap:26px; } }

    .p-card{ background:#faf7f2; border-radius:18px; overflow:hidden; box-shadow:inset 0 0 0 1px rgba(0,0,0,.06), 0 12px 28px rgba(0,0,0,.06); }
    .p-media{ position:relative; display:flex; align-items:center; justify-content:center; aspect-ratio:4/3; background:#fff; border-bottom:1px solid rgba(0,0,0,.06); }
    .p-media img{ max-width:76%; max-height:80%; object-fit:contain; filter:drop-shadow(0 10px 16px rgba(0,0,0,.08)); }
    .p-badge{ position:absolute; right:12px; top:12px; background:var(--accent); color:#fff; padding:.35rem .55rem; border-radius:10px; font-size:.75rem; font-weight:800; letter-spacing:.06em; }

    .p-body{ padding:16px 16px 18px; text-align:center; }
    .p-eyebrow{ margin:0 0 6px; text-transform:uppercase; letter-spacing:.18em; font-weight:800; color:#2a3e36; opacity:.85; font-size:.88rem; }
    .p-title{ margin:4px 0 8px; font-weight:900; font-size:clamp(18px,2.1vw,24px); color:#184034; }
    .p-title a{ color:inherit; text-decoration:none; }
    .p-title a:hover{ text-decoration:underline; }

    .p-price{ margin:6px 0 14px; color:#d65a38; font-weight:800; font-size:1.06rem; }
    .p-price .old{ color:#8a8a8a; text-decoration:line-through; margin-right:.45rem; font-weight:600; }
    .p-price .new{ color:#d65a38; font-weight:800; }

    .p-btn{
      display:inline-block; padding:14px 20px; border-radius:999px;
      background:var(--accent); color:#fff; text-decoration:none; font-weight:900;
      box-shadow:0 10px 24px rgba(232,97,60,.25);
    }
    .p-btn:hover{ filter:brightness(1.05); }
    .p-btn:active{ transform:translateY(1px); }
  </style>

  <!-- ===== JS (compteur + tri) ===== -->
  <script>
    // Compteur
    (function(){
      const rc = document.getElementById('resultsCount');
      const grid = document.getElementById('productGrid');
      if(!rc || !grid) return;
      const total = grid.children.length;
      rc.textContent = `AFFICHAGE DE 1–${total} SUR ${total} RÉSULTATS`;
    })();

    // Tri
    (function(){
      const grid = document.getElementById('productGrid');
      const select = document.getElementById('sortSelect');
      if(!grid || !select) return;

      const toNum = v => (typeof v === 'string' ? parseFloat(v) : +v);
      const get   = (el, a) => el.getAttribute(a);

      function sortProducts(mode){
        const items = Array.from(grid.children);
        let sorted = items.slice();

        switch(mode){
          case 'pop':       sorted.sort((a,b)=> toNum(get(b,'data-popularity')) - toNum(get(a,'data-popularity')) ); break;
          case 'rating':    sorted.sort((a,b)=> toNum(get(b,'data-rating'))     - toNum(get(a,'data-rating')) );     break;
          case 'date':      sorted.sort((a,b)=> new Date(get(b,'data-date'))    - new Date(get(a,'data-date')) );    break;
          case 'price-asc': sorted.sort((a,b)=> toNum(get(a,'data-price'))      - toNum(get(b,'data-price')) );      break;
          case 'price-desc':sorted.sort((a,b)=> toNum(get(b,'data-price'))      - toNum(get(a,'data-price')) );      break;
          default:          sorted.sort((a,b)=> toNum(get(a,'data-index'))      - toNum(get(b,'data-index')) );
        }

        const frag = document.createDocumentFragment();
        sorted.forEach(el => frag.appendChild(el));
        grid.appendChild(frag);
      }

      select.addEventListener('change', e => sortProducts(e.target.value));
    })();
  </script>
</Layout>
